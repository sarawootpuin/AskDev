<p-panel header="ข้อมูลผู้ค้ำ">

  <p-table [value]="list_qryGuarantor" [(selection)]="vSelected_Guar" [responsive]="true"
           selectionMode="single"
           (onRowSelect)="onSelectGuar($event.index)">
    <ng-template pTemplate="header">
      <tr>
        <th>ความรับผิดชอบ</th>
        <th>รหัสผู้ค้ำประกัน</th>
        <th>ชื่อผู้ค้ำประกัน</th>
        <th>ความสัมพันธ์กับลูกค้า</th>
        <th>คีย์ลำดับที่</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
      <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
        <td>{{rowData.responsibility_level}}</td>
        <td>{{rowData.guar_code}}</td>
        <td>{{rowData.guar_name}}</td>
        <td>{{rowData.relation_with_cus}}</td>
        <td>{{rowData.upd_crd_grd}}</td>
      </tr>
    </ng-template>
  </p-table>

  <br>

  <div class="row">
    <div class="col-sm-6">
      <div class="card border-light mb-3">
        <div class="card-header bg-transparent border-light"><b>ชื่อ - นามสกุล</b></div>
        <div class="card-body">
          <div class="card-text">
            <dl class="row">
              <dt class="col-md-2">คำนำหน้าชื่อ</dt>
              <dd class="col-md-4">{{vSelected_Guar.lblF_Name || '...'}}</dd>

              <dt class="col-md-2">อายุ</dt>
              <dd class="col-md-4">{{vSelected_Guar.lbl_age || '...'}}</dd>

              <dt class="col-md-2">ชื่อ-สกุล</dt>
              <dd class="col-md-10">{{vSelected_Guar.lblCus_Name || '...'}}</dd>

              <dt class="col-md-2">เลขที่บัตร</dt>
              <dd class="col-md-4">{{vSelected_Guar.lblNew_Card_No || '...'}}</dd>
              <dd class="col-md-3">{{vSelected_Guar.lblBranch_No || '...'}}</dd>
              <dd class="col-md-3">{{vSelected_Guar.lblBus_Vat_Flg || '...'}}</dd>
            </dl>
          </div>
        </div>
      </div>

      <div class="card border-light mb-3">
        <div class="card-header bg-transparent border-light"><b>Current&emsp;&emsp;&emsp; <span style="color:red">ที่อยู่ในใบกำกับภาษี</span></b></div>
        <div class="card-body">
          <div class="card-text">
            <dl class="row">
              <dt class="col-md-2">ที่อยู่</dt>
              <dd class="col-md-10">{{vSelected_Guar.lblAddress + '\n' + vSelected_Guar.lblZip_Desc || '...'}}</dd>

              <dt class="col-md-2">สถานที่ใกล้เคียง</dt>
              <dd class="col-md-10">{{vSelected_Guar.lblNear || '...'}}</dd>

              <dt class="col-md-2">ชื่อผู้ติดต่อ</dt>
              <dd class="col-md-10">{{vSelected_Guar.lblContract || '...'}}</dd>

              <dt class="col-md-2">Tel</dt>
              <dd class="col-md-8">{{vSelected_Guar.lblTel || '...'}}</dd>
              <dd class="col-md-2" style="cursor: pointer" (click)="onTelHist('TEL')">History Tel.</dd>
            </dl>
          </div>
        </div>
      </div>

      <div class="card border-light mb-3">
        <div class="card-header bg-transparent border-light"><b>Card&emsp;&emsp;&emsp; <span style="color:red">ที่อยู่ในใบเสร็จรับเงิน และใบกำกับภาษี</span></b>
        </div>
        <div class="card-body">
          <div class="card-text">
            <dl class="row">
              <dt class="col-md-2">ที่อยู่</dt>
              <dd class="col-md-10">{{vSelected_Guar.lblAdd_C || '...'}}</dd>

              <dt class="col-md-2">Tel.</dt>
              <dd class="col-md-8">{{vSelected_Guar.lblTel_Card || '...'}}</dd>
              <dd class="col-md-2" style="cursor: pointer" (click)="onTelHist('TEL_C')">History Tel.</dd>
            </dl>
          </div>
        </div>
      </div>

      <div class="card border-light mb-3">
        <div class="card-header bg-transparent border-light"><b>ติดต่ออื่น ๆ</b></div>
        <div class="card-body">
          <div class="card-text">
            <dl class="row">
              <dt class="col-md-2">SMS (Mobile 1)</dt>
              <dd class="col-md-7">{{vSelected_Guar.lblSMS || '...'}}</dd>
              <dd class="col-md-3" style="cursor: pointer" (click)="onTelHist('MOBILE_PHONE')">History Tel.(Mobile & SMS)</dd>

              <dt class="col-md-2">Mobile Phone</dt>
              <dd class="col-md-10">{{vSelected_Guar.lblMobile_Phone || '...'}}</dd>

              <dt class="col-md-2">E-Mail Address</dt>
              <dd class="col-md-10">{{vSelected_Guar.lblEmail_Address || '...'}}</dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-6">
      <div class="card border-light mb-3">
        <div class="card-header bg-transparent border-light"><b>Office</b></div>
        <div class="card-body">
          <div class="card-text">
            <dl class="row">
              <dt class="col-md-3">ที่อยู่</dt>
              <dd class="col-md-7">{{vSelected_Guar.lblAdd_O || '...'}}</dd>

              <dt class="col-md-3">บริษัท</dt>
              <dd class="col-md-7">{{vSelected_Guar.lblOffice_Name || '...'}}</dd>

              <dt class="col-md-3">แผนก</dt>
              <dd class="col-md-7">{{vSelected_Guar.lblOffice_Department || '...'}} &nbsp;</dd>

              <dt class="col-md-3">อาชีพ</dt>
              <dd class="col-md-7">{{vSelected_Guar.lblOccupa_Desc || '...'}}</dd>

              <dt class="col-md-3">ตำแหน่ง</dt>
              <dd class="col-md-7">{{vSelected_Guar.lblPosi_Desc || '...'}}</dd>

              <dt class="col-md-3">สถานที่ใกล้เคียง</dt>
              <dd class="col-md-7">{{vSelected_Guar.lblNear_O || '...'}}</dd>

              <dt class="col-md-3">Tel. (ที่ทำงาน)</dt>
              <dd class="col-md-7">{{vSelected_Guar.lblTel_O || '...'}}</dd>
              <dd class="col-md-2" style="cursor: pointer" (click)="onTelHist('TEL_O')">History Tel.</dd>
            </dl>
          </div>
        </div>
      </div>
      <div class="card border-light mb-3">
        <div class="card-header bg-transparent border-light"><b>Mail&emsp;&emsp;&emsp; <span style="color:red">ที่อยู่ในใบเสร็จ</span></b>
        </div>
        <div class="card-body">
          <div class="card-text">
            <dl class="row">
              <dt class="col-md-3">ที่อยู่</dt>
              <dd class="col-md-7">{{vSelected_Guar.lblAdd_M || '...'}}</dd>
            </dl>
          </div>
        </div>
      </div>

      <div class="card border-light mb-3">
        <div class="card-header bg-transparent border-light"><b>รายละเอียดการส่งใบเสร็จ</b></div>
        <div class="card-body">
          <div class="card-text">
            <dl class="row">
              <dt class="col-md-3">ประเภทการส่งใบเสร็จรับเงิน</dt>
              <dd class="col-md-7">{{vSelected_Guar.lbtype_bill || '...'}}</dd>

              <dt class="col-md-3">เริ่มวันที่</dt>
              <dd class="col-md-7">{{vSelected_Guar.lbdate_bill || '...'}}</dd>
            </dl>
          </div>
        </div>
      </div>
      <div class="card border-light mb-3">
        <div class="card-header bg-transparent border-light"><b>ที่อยู่ติดตามหนี้</b></div>
        <div class="card-body">
          <div class="card-text">
            <dl class="row">
              <dt class="col-md-3">ที่อยู่</dt>
              <dd class="col-md-7">{{vSelected_Guar.richAdd_Debt || '...'}}</dd>

              <dt class="col-md-3">จังหวัด</dt>
              <dd class="col-md-9">{{vSelected_Guar.lblProvince_Debt || '...'}}</dd>

              <!--<dd class="col-md-12" style="cursor: pointer">History Change Regional</dd>-->
            </dl>
          </div>
        </div>
      </div>
    </div>
  </div>
</p-panel>

<app-action-dialog [title]="'History (Change Telephone Number)'" #tel_hist [width]="1000"
                   [showOk]="true">
  <app-ccs-tel-hist [type]="tel_hist_typ" [ent_code]="ent_code"></app-ccs-tel-hist>
</app-action-dialog>
